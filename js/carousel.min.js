/*
 * Title: Accessible Carousel - acc_carousel
 * Author: Alan Espinet
 * Version: 1.0.0
 * Description: WCAG 2.1 Accessoble Carousel
*/

!function(t){var e=!0;t("body").on("click",".acc_carousel .next-button",function(a){if(a.preventDefault(),e){e=!1;var n=t(this).parents(".acc_carousel"),i=n.find(".elements-wrapper"),s=i.css("width"),r=parseFloat(s),d=parseInt(n.attr("data-items")),o=parseInt(n.attr("data-showing-item"));if(o<d){var l=parseFloat(i.css("left"))-r;i.css("left",l+"px"),o++,n.attr("data-showing-item",o)}else{var c=n.find('.element[data-item="1"]').clone();i.append(c);l=parseFloat(i.css("left"))-r;i.css("left",l+"px"),setTimeout(function(){i.css("transition","none"),i.css("left","0"),c.remove(),o=1,n.attr("data-showing-item",o),setTimeout(function(){i.removeAttr("style")},50)},550)}n.find(".element").attr("aria-hidden","true"),n.find('.element[data-item="'+o+'"]').attr("aria-hidden","false"),n.find(".element a").attr("tabindex","-1"),n.find('.element[data-item="'+o+'"] a').attr("tabindex","0"),n.find(".element input").attr("tabindex","-1"),n.find('.element[data-item="'+o+'"] input').attr("tabindex","0"),n.find(".element button").attr("tabindex","-1"),n.find('.element[data-item="'+o+'"] button').attr("tabindex","0"),setTimeout(function(){n.find(".carousel-single-dot").removeClass("active-dot"),n.find(".carousel-single-dot_"+n.attr("data-showing-item")).addClass("active-dot")},560),setTimeout(function(){e=!0},600)}}),t("body").on("click",".acc_carousel .prev-button",function(a){if(a.preventDefault(),e){e=!1;var n=t(this).parents(".acc_carousel"),i=n.find(".elements-wrapper"),s=i.css("width"),r=parseFloat(s),d=parseInt(n.attr("data-items")),o=parseInt(n.attr("data-showing-item"));if(o>1){var l=parseFloat(i.css("left"))+r;i.css("left",l+"px"),o--,n.attr("data-showing-item",o)}else{var c=n.find('.element[data-item="'+d+'"]').clone();l=parseFloat(i.css("left"))+r;i.css("transition","none"),i.prepend(c),i.css("left",-1*r+"px"),setTimeout(function(){i.removeAttr("style")},10),setTimeout(function(){var t=r*(d-1)*-1;i.css("transition","none"),i.css("left",t+"px"),c.remove(),o=d,n.attr("data-showing-item",o),setTimeout(function(){i.css("transition","left .5s ease")},50)},550)}n.find(".element").attr("aria-hidden","true"),n.find('.element[data-item="'+o+'"]').attr("aria-hidden","false"),n.find(".element a").attr("tabindex","-1"),n.find('.element[data-item="'+o+'"] a').attr("tabindex","0"),n.find(".element input").attr("tabindex","-1"),n.find('.element[data-item="'+o+'"] input').attr("tabindex","0"),n.find(".element button").attr("tabindex","-1"),n.find('.element[data-item="'+o+'"] button').attr("tabindex","0"),setTimeout(function(){n.find(".carousel-single-dot").removeClass("active-dot"),n.find(".carousel-single-dot_"+n.attr("data-showing-item")).addClass("active-dot")},560),setTimeout(function(){e=!0},600)}}),t(window).on("resize",function(){t(".acc_carousel").each(function(){var e=(parseInt(t(this).attr("data-showing-item"))-1)*parseFloat(t(this).find(".elements-wrapper").css("width"))*-1+"px";t(this).find(".elements-wrapper").css("left",e)})})}(jQuery),jQuery.fn.createCarousel=function(t){var e=$(this).find(".element").length,a=(t=t||{}).prevHtml||"Prev",n=t.nextHtml||"Next",i=t.wcagDescription||"carousel of "+e+" elements",s=t.showDots||!1;$(this).attr("aria-label",i),$(this).attr("data-items",e),$(this).attr("data-showing-item","1");var r=$('<a href="#" role="button" aria-label="previous element" class="prev-button">'+a+"</a>"),d=$('<a href="#" role="button" aria-label="next element" class="next-button">'+n+"</a>");$(this).prepend(r);var o=$('<div class="elements-container"></div>'),l=$('<div class="elements-wrapper"></div>'),c=1;if($(this).find(".element").each(function(){$(this).addClass("element_"+c),$(this).attr("data-item",c),1===c?$(this).attr("aria-hidden","false"):$(this).attr("aria-hidden","true"),$(this).attr("aria-label","carousel element "+c+" of "+e),$(this).appendTo(l),c++}),o.append(l),$(this).append(o),$(this).append(d),s){for(var f=$('<div class="carousel-dots" aria-hidden="true"></div>'),m=0;m<e;m++){var u="carousel-single-dot carousel-single-dot_"+(m+1);0===m&&(u+=" active-dot");var p=$('<div class="'+u+'"></div>');f.append(p)}$(this).append(f)}$(this).find(".element a").each(function(){$(this).attr("tabindex","-1")}),$(this).find('.element[data-item="1"] a').attr("tabindex","0"),$(this).find(".element input").each(function(){$(this).attr("tabindex","-1")}),$(this).find('.element[data-item="1"] input').attr("tabindex","0"),$(this).find(".element button").each(function(){$(this).attr("tabindex","-1")}),$(this).find('.element[data-item="1"] button').attr("tabindex","0")};
